<form [formGroup]="passwordForm" (ngSubmit)="submitForm()">
  <!-- Current Password -->
  <div class="mb-5">
    <label for="currentPassword" class="block mb-2">Contraseña Actual</label>
    <div class="relative">
      <input
        [type]="showCurrentPassword ? 'text' : 'password'"
        id="currentPassword"
        formControlName="currentPassword"
        class="w-full border border-gray-300 rounded-md px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-gob-500 focus:border-gob-500"
        placeholder="••••••••"
      />
      <button
        type="button"
        (click)="togglePasswordVisibility('current')"
        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"
      >
        <i
          class="pi"
          [ngClass]="showCurrentPassword ? 'pi-eye-slash' : 'pi-eye'"
        ></i>
      </button>
    </div>
    <small
      *ngIf="passwordForm.get('currentPassword')?.errors?.['required'] && passwordForm.get('currentPassword')?.touched"
      class="text-red-500"
    >
      La contraseña actual es requerida
    </small>
  </div>

  <!-- New Password -->
  <div class="mb-5">
    <label for="newPassword" class="block mb-2 text-gray-700"
      >Nueva Contraseña</label
    >
    <div class="relative">
      <input
        [type]="showNewPassword ? 'text' : 'password'"
        id="newPassword"
        formControlName="newPassword"
        class="w-full border border-gray-300 rounded-md px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-gob-500 focus:border-gob-500"
        placeholder="••••••••"
      />
      <button
        type="button"
        (click)="togglePasswordVisibility('new')"
        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"
      >
        <i
          class="pi"
          [ngClass]="showNewPassword ? 'pi-eye-slash' : 'pi-eye'"
        ></i>
      </button>
    </div>
    <small
      *ngIf="passwordForm.get('newPassword')?.errors?.['required'] && passwordForm.get('newPassword')?.touched"
      class="text-red-500"
    >
      La nueva contraseña es requerida
    </small>
    <small
      *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']"
      class="text-red-500"
    >
      La contraseña debe tener al menos 8 caracteres
    </small>
  </div>

  <!-- Confirm Password -->
  <div class="mb-5">
    <label for="confirmPassword" class="block mb-2 text-gray-700"
      >Confirmar Contraseña</label
    >
    <div class="relative">
      <input
        [type]="showConfirmPassword ? 'text' : 'password'"
        id="confirmPassword"
        formControlName="confirmPassword"
        class="w-full border border-gray-300 rounded-md px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-gob-500 focus:border-gob-500"
        placeholder="••••••••"
      />
      <button
        type="button"
        (click)="togglePasswordVisibility('confirm')"
        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"
      >
        <i
          class="pi"
          [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"
        ></i>
      </button>
    </div>
    <small
      *ngIf="passwordForm.get('confirmPassword')?.errors?.['required'] && passwordForm.get('confirmPassword')?.touched"
      class="text-red-500"
    >
      Confirme su nueva contraseña
    </small>
    <small
      *ngIf="passwordForm.get('confirmPassword')?.errors?.['mismatch']"
      class="text-red-500"
    >
      Las contraseñas no coinciden
    </small>
  </div>

  <!-- Submit Button -->
  <div class="mt-6">
    <button
      type="submit"
      [disabled]="passwordForm.invalid || isSubmitting"
      class="w-full bg-gob-500 text-white py-3 px-4 rounded-full flex items-center justify-center hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gob-500 transition-colors"
    >
      <i *ngIf="isSubmitting" class="pi pi-spinner pi-spin mr-2"></i>
      <span>Cambiar Contraseña</span>
    </button>
  </div>
</form>
